$(function(){$("#datepicker").datepicker({yearRange:"1920:2015",changeMonth:!0,changeYear:!0})});var timer=function(){var e=55,t=60,s=$("#weeks"),r=$("#days"),a=$("#hours"),n=$("#minutes"),o=$("#seconds"),i=$(".timer-container");return{getTimer:function(e,t){var s={};return s.seconds=e%60,e=(e-s.seconds)/60,s.minutes=e%60,e=(e-s.minutes)/60,s.hours=e%24,e=(e-s.hours)/24,s.days=e%7,s.weeks=(e-s.days)/7,s},showTimer:function(e){s.text((e.weeks<1e3?"0":"")+(e.weeks<100?"0":"")+(e.weeks<10?"0":"")+e.weeks.toString()),r.text((e.days<10?"0":"")+e.days.toString()),a.text((e.hours<10?"0":"")+e.hours.toString()),n.text((e.minutes<10?"0":"")+e.minutes.toString()),o.text((e.seconds<10?"0":"")+e.seconds.toString()),i.addClass("show")},daysCounter:function(s){s.preventDefault();var r=$("#success-text"),a=$("#data-form"),n=new Date($("#datepicker").val()),o=new Date,d=$("#sex").prop("checked")?e:t,u=n.getFullYear()+d,c=new Date(u,n.getMonth(),n.getDate(),0,0,0,0),m=c-o,h=m%1e3;m=(m-h)/1e3;var l=u-o.getFullYear();if(m>0){a.addClass("hidden"),timer.showTimer(timer.getTimer(m,l));var w=setInterval(function(){m--,m>0?timer.showTimer(timer.getTimer(m,l)):(clearInterval(w),r.addClass("show"),i.removeClass("show"))},1e3)}else r.addClass("show"),a.addClass("hidden")}}}();$("#data-form").on("submit",timer.daysCounter);